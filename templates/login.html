{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>kargoexpress281 ‚Äî –í—Ö–æ–¥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{% static 'css/auth.css' %}" />
  {% if site_settings and site_settings.logo %}
  <link rel="icon" type="image/png" href="{{ site_settings.logo.url }}">
{% else %}
  <link rel="icon" type="image/png" href="{% static 'img/favicon-32.png' %}">
{% endif %}

</head>
<body
  class="theme-light"
  data-default-theme="{% if site_settings and site_settings.default_dark_mode %}dark{% else %}light{% endif %}"
  {% if site_settings %}
    style="
      {% if site_settings.bg_light %}
        --bg-light: url('{{ site_settings.bg_light.url }}');
      {% endif %}
      {% if site_settings.bg_dark %}
        --bg-dark: url('{{ site_settings.bg_dark.url }}');
      {% endif %}
    "
  {% endif %}
>
  <div class="page">
    <!-- Header -->
    <header class="header">
      {% comment %} <div class="header__logo">
        {% if site_settings and site_settings.logo %}
          <img src="{{ site_settings.logo.url }}" alt="{{ site_settings.title }}" class="header__logo-img" />
        {% else %}
          <img src="{% static 'img/logo.png' %}" alt="kargoexpress281" class="header__logo-img" />
        {% endif %}
      </div> {% endcomment %}
      <div class="header__tabs">
        <button class="tab-button tab-button--active" type="button">
          –í—Ö–æ–¥
        </button>
        <button
          class="tab-button"
          type="button"
          data-link="{% url 'register' %}"
        >
          –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        </button>
      </div>

      <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
      <button
        type="button"
        class="theme-toggle"
        id="themeToggleBtn"
        aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
      >
        üåô
      </button>
    </header>

    <!-- Main -->
    <main class="main">
      <div class="auth-card-wrapper">
        <div class="auth-card-logo">
          {% if site_settings and site_settings.logo %}
            <img src="{{ site_settings.logo.url }}" alt="{{ site_settings.title }}" class="auth-card-logo__img" />
          {% else %}
            <img src="{% static 'img/logo.png' %}" alt="kargoexpress281" class="auth-card-logo__img" />
          {% endif %}
        </div>

        <div class="auth-card">
          <form class="auth-form" id="loginForm" method="post" action="{% url 'login' %}">
            {% csrf_token %}

            {% if errors.non_field %}
              <div class="form-error">
                {{ errors.non_field }}
              </div>
            {% endif %}

            <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
            <div class="form-group">
              <label for="login-phone" class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
              <div class="input-wrapper input-wrapper--phone">
                <span class="input-prefix">+996</span>
                <input
                  id="login-phone"
                  name="phone"
                  type="tel"
                  class="input input--phone"
                  placeholder="000 000 000"
                  autocomplete="tel"
                  required
                  value="{{ form_data.phone|default:'' }}"
                />
              </div>
              {% if errors.phone %}
                <p class="helper-text" style="color:#dc2626;">
                  {{ errors.phone }}
                </p>
              {% endif %}
            </div>

            <!-- –ü–∞—Ä–æ–ª—å -->
            <div class="form-group">
              <label for="login-password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
              <div class="input-wrapper input-wrapper--password">
                <input
                  id="login-password"
                  name="password"
                  type="password"
                  class="input input--password"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                  autocomplete="current-password"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  id="loginTogglePassword"
                  aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å"
                >
                  <span class="password-toggle__icon" id="loginTogglePasswordIcon">üëÅ</span>
                </button>
              </div>
              {% if errors.password %}
                <p class="helper-text" style="color:#dc2626;">
                  {{ errors.password }}
                </p>
              {% endif %}
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <button type="submit" class="btn btn--primary">
              –í–æ–π—Ç–∏
            </button>

            <!-- –°—Å—ã–ª–∫–∏ -->
            <div class="auth-links">
              <button type="button" class="auth-link">
                –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
              </button>
              <div class="auth-link-text">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
                <button
                  type="button"
                  class="auth-link auth-link--accent"
                  data-link="{% url 'register' %}"
                >
                  –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
              </div>
            </div>
          </form>
        </div>

        <div class="auth-info">
          –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2025 kargoexpress281. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
  </div>

  <script src="{% static 'js/cabinet-theme.js' %}"></script>
  <script src="{% static 'js/login.js' %}"></script>
</body>
</html>
