{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>kargoexpress281 ‚Äî –ü–∞–Ω–µ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{% static 'css/staff-parcels.css' %}" />
  {% if site_settings and site_settings.logo %}
    <link rel="icon" type="image/png" href="{{ site_settings.logo.url }}">
  {% else %}
    <link rel="icon" type="image/png" href="{% static 'img/favicon-32.png' %}">
  {% endif %}
</head>
<body>
  <div class="app app--staff">
    <!-- HEADER -->
    <header class="header header--staff">
      <div class="header__logo">
        <img src="{% static 'img/logo.png' %}" alt="kargoexpress281" class="header__logo-img" />
      </div>
      <div class="header__right">
        <span class="header__role-badge">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</span>
        <a href="{% url 'logout' %}" class="header__logout">–í—ã–π—Ç–∏</a>
      </div>
    </header>

    <!-- MAIN -->
    <main class="main main--staff">
      <div class="layout layout--staff">
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–∞ -->
        <div class="card card--center">
          <h1 class="card__title">–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä</h1>
          <p class="card__subtitle">
            –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä –ø–æ—Å—ã–ª–∫–∏. –ü–µ—Ä–≤—ã–π —Å–∫–∞–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –∏–∑ –ö–∏—Ç–∞—è,
            –≤—Ç–æ—Ä–æ–π —Å–∫–∞–Ω (–ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏) ‚Äî —Å—Ç–∞–≤–∏—Ç –ø—Ä–∏–±—ã—Ç–∏–µ –≤ –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏.
          </p>

          {% if error_message %}
            <div id="staffAlertError" class="alert alert--error">
              {{ error_message }}
            </div>
          {% endif %}
          {% if success_message %}
            <div id="staffAlertSuccess" class="alert alert--success">
              {{ success_message }}
            </div>
          {% endif %}

          <form
            id="staffParcelForm"
            class="staff-form"
            method="post"
            action="{% url 'staff_parcels' %}"
          >
            {% csrf_token %}

            <div class="input-wrapper">
              <input
                id="staffTrackInput"
                name="track_number"
                type="text"
                class="input input--staff"
                maxlength="18"
                minlength="6"
                autocomplete="off"
                placeholder="–¢—Ä–µ–∫-–Ω–æ–º–µ—Ä (6-18 —Å–∏–º–≤–æ–ª–æ–≤)"
                required
              />
            </div>


            <div class="staff-form__actions">
              <button type="submit" class="btn btn--primary">
                –î–æ–±–∞–≤–∏—Ç—å
              </button>
              <br>
              <br>
              <button id="staffClearBtn" type="button" class="btn btn--ghost">
                –û—á–∏—Å—Ç–∏—Ç—å
              </button>
            </div>

            <p class="helper-text">
              –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤. –î–ª–∏–Ω–∞: 6‚Äì18 —Å–∏–º–≤–æ–ª–æ–≤.
            </p>
          </form>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—ã–ª–∫–∏ -->
        <div class="card card--fullwidth card--recent">
          <div class="card__header">
            <h2 class="card__title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—ã–ª–∫–∏</h2>
            <p class="card__subtitle card__subtitle--light">
              –ü–æ–∫–∞–∑–∞–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –æ–ø–µ—Ä–∞—Ü–∏–π.
            </p>
          </div>

          {% if recent_parcels %}
            <div id="staffRecentList" class="recent-list">
              {% for parcel in recent_parcels %}
                <div class="recent-item staff-list-item" data-track="{{ parcel.track_number }}">
                  <div class="recent-item__left">
                    <p class="recent-item__number">
                      {{ parcel.track_number }}
                    </p>
                    <p class="recent-item__status">
                      {{ parcel.get_status_display }}
                    </p>
                  </div>
                  <p class="recent-item__time">
                    {{ parcel.created_at|date:"Y-m-d H:i" }}
                  </p>
                </div>
              {% endfor %}
            </div>
          {% else %}
            <div class="empty-state">
              <div class="empty-state__icon">üì¶</div>
              <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—ã–ª–æ–∫.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </main>
  </div>

  <script src="{% static 'js/staff-parcels.js' %}"></script>
</body>
</html>
